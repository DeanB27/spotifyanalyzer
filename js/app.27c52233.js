(function(){"use strict";var t={9931:function(t,e,i){var s=i(3751),n=i(641),a=i.p+"img/Vibify.4cbb8b1e.png";const r={id:"app",class:"app-container"},l={key:0,class:"user-info"};function o(t,e,i,s,o,c){const u=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",r,[(0,n.Lk)("header",null,[e[1]||(e[1]=(0,n.Lk)("div",{class:"logo-container"},[(0,n.Lk)("img",{src:a,alt:"Vibify Logo",class:"logo"}),(0,n.Lk)("h1",null,"Spotify Playlist Analyzer")],-1)),o.isAuthenticated?((0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>c.logout&&c.logout(...t)),class:"spotify-button outline"},"Logout")])):(0,n.Q3)("",!0)]),(0,n.Lk)("main",null,[(0,n.bF)(u)]),e[2]||(e[2]=(0,n.Lk)("footer",null,[(0,n.Lk)("p",null,"Created with Vue.js | Spotify API")],-1))])}i(4114);const c="https://accounts.spotify.com/authorize",u="https://api.spotify.com/v1",p=["playlist-read-private","playlist-read-collaborative","user-read-private"].join("%20"),d={init(){this.clientId={NODE_ENV:"production",BASE_URL:"/spotifyanalyzer/"}.VUE_APP_SPOTIFY_CLIENT_ID,this.redirectUri={NODE_ENV:"production",BASE_URL:"/spotifyanalyzer/"}.VUE_APP_REDIRECT_URI||`${window.location.origin}/spotifyanalyzer/callback`,this.accessToken=this.getTokenFromUrl()||localStorage.getItem("spotify_access_token"),this.getTokenFromUrl()&&window.history.replaceState({},document.title,"/")},getTokenFromUrl(){const t=window.location.hash;if(!t)return null;const e=t.match(/#access_token=([^&]*)/);return e?e[1]:null},isAuthenticated(){return!!this.accessToken},authenticate(){const t=`${c}?client_id=${this.clientId}&redirect_uri=${this.redirectUri}&scope=${p}&response_type=token&show_dialog=true`;window.location.href=t},setAccessToken(t){this.accessToken=t,localStorage.setItem("spotify_access_token",t)},logout(){this.accessToken=null,localStorage.removeItem("spotify_access_token")},async apiRequest(t,e="GET",i=null){if(!this.accessToken)throw new Error("No access token available");const s={Authorization:`Bearer ${this.accessToken}`};i&&"GET"!==e&&(s["Content-Type"]="application/json");const n={method:e,headers:s};i&&"GET"!==e&&(n.body=JSON.stringify(i));const a=await fetch(`${u}${t}`,n);if(401===a.status)throw this.logout(),new Error("Your session has expired. Please log in again.");if(!a.ok){const t=await a.json();throw new Error(t.error.message||"An error occurred with the Spotify API")}return a.json()},getPlaylistIdFromUrl(t){const e=t.match(/playlist\/([a-zA-Z0-9]+)/);return e?e[1]:null},async getPlaylist(t){return this.apiRequest(`/playlists/${t}`)},async getPlaylistTracks(t){let e=[],i=`/playlists/${t}/tracks`,s=!0;while(s){const t=await this.apiRequest(i);e=[...e,...t.items],t.next?i=t.next.replace(u,""):s=!1}return e},async getAudioFeatures(t){const e=[];for(let i=0;i<t.length;i+=100){const s=t.slice(i,i+100),n=await this.apiRequest(`/audio-features?ids=${s.join(",")}`);e.push(...n.audio_features)}return e},async getArtist(t){return this.apiRequest(`/artists/${t}`)},async getArtists(t){const e=[];for(let i=0;i<t.length;i+=50){const s=t.slice(i,i+50),n=await this.apiRequest(`/artists?ids=${s.join(",")}`);e.push(...n.artists)}return e},async getRecommendations(t,e=20){const i=t.slice(0,5);return this.apiRequest(`/recommendations?seed_tracks=${i.join(",")}&limit=${e}`)},determineMood(t){return t.valence>.7&&t.energy>.6?"Happy":t.valence<.3&&t.energy<.4?"Sad":t.energy>.7?"Energetic":t.tempo<100?"Chill":"Neutral"},normalizeGenre(t){return t.includes("country")?"Country":t.includes("rock")?"Rock":t.includes("rap")?"Rap":t.includes("pop")?"Pop":t.includes("hip hop")?"Hip hop":t.includes("jazz")?"Jazz":t.includes("soul")?"Soul":t.includes("metal")?"Metal":t.includes("funk")?"Funk":t.includes("indie")?"Indie":t.includes("techno")?"Techno":t.includes("dubstep")?"Dubstep":t.includes("alternative")?"Alt":t.includes("folk")?"Folk":"Other"}};var h=d,y={name:"App",data(){return{isAuthenticated:!1}},created(){h.init(),this.isAuthenticated=h.isAuthenticated(),window.addEventListener("spotify-auth-change",(()=>{this.isAuthenticated=h.isAuthenticated()}))},methods:{logout(){h.logout(),this.isAuthenticated=!1,this.$router.push("/")}}},f=i(6262);const g=(0,f.A)(y,[["render",o]]);var k=g,m=i(5220),v=i(33);const E={class:"home"},w={class:"hero"},L={key:0,class:"auth-container"},b={key:1,class:"playlist-input"},A={class:"input-container"},P=["disabled"],_={key:0,class:"error-message"},U={key:1,class:"loading-container"},C={key:0,class:"user-playlists"},z={class:"playlist-grid"},T=["onClick"],S=["src","alt"],R={class:"playlist-info"};function I(t,e,i,a,r,l){return(0,n.uX)(),(0,n.CE)("div",E,[(0,n.Lk)("div",w,[e[4]||(e[4]=(0,n.Lk)("h1",null,"Analyze Your Spotify Playlists",-1)),e[5]||(e[5]=(0,n.Lk)("p",null,"Discover insights about your music taste with detailed analytics and visualizations",-1)),r.isAuthenticated?((0,n.uX)(),(0,n.CE)("div",b,[(0,n.Lk)("div",A,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>r.playlistUrl=t),placeholder:"Enter Spotify playlist URL",class:"playlist-url-input"},null,512),[[s.Jo,r.playlistUrl]]),(0,n.Lk)("button",{onClick:e[2]||(e[2]=(...t)=>l.analyzePlaylist&&l.analyzePlaylist(...t)),disabled:!l.isValidUrl,class:"spotify-button"}," Analyze ",8,P)]),r.urlError?((0,n.uX)(),(0,n.CE)("p",_,(0,v.v_)(r.urlError),1)):(0,n.Q3)("",!0),r.isLoading?((0,n.uX)(),(0,n.CE)("div",U,e[3]||(e[3]=[(0,n.Lk)("div",{class:"loading-bar"},[(0,n.Lk)("div",{class:"loading-bar-progress"})],-1),(0,n.Lk)("p",null,"Loading playlist data...",-1)]))):(0,n.Q3)("",!0)])):((0,n.uX)(),(0,n.CE)("div",L,[(0,n.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>l.loginWithSpotify&&l.loginWithSpotify(...t)),class:"spotify-button"}," Connect with Spotify ")]))]),r.isAuthenticated&&r.userPlaylists.length>0?((0,n.uX)(),(0,n.CE)("div",C,[e[6]||(e[6]=(0,n.Lk)("h2",null,"Your Playlists",-1)),(0,n.Lk)("div",z,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.userPlaylists,(t=>((0,n.uX)(),(0,n.CE)("div",{key:t.id,class:"playlist-card",onClick:e=>l.selectPlaylist(t.external_urls.spotify)},[(0,n.Lk)("img",{src:t.images[0]?.url||"/images/default-playlist.png",alt:t.name,class:"playlist-cover"},null,8,S),(0,n.Lk)("div",R,[(0,n.Lk)("h3",null,(0,v.v_)(t.name),1),(0,n.Lk)("p",null,(0,v.v_)(t.tracks.total)+" tracks",1)])],8,T)))),128))])])):(0,n.Q3)("",!0)])}var $={name:"HomeView",data(){return{isAuthenticated:!1,playlistUrl:"",urlError:"",isLoading:!1,userPlaylists:[]}},computed:{isValidUrl(){return this.playlistUrl.includes("spotify.com/playlist/")}},created(){h.init(),this.isAuthenticated=h.isAuthenticated(),this.isAuthenticated&&this.fetchUserPlaylists()},methods:{loginWithSpotify(){h.authenticate()},async fetchUserPlaylists(){try{const t=await h.apiRequest("/me/playlists?limit=50");this.userPlaylists=t.items}catch(t){console.error("Error fetching playlists:",t)}},selectPlaylist(t){this.playlistUrl=t,this.analyzePlaylist()},async analyzePlaylist(){if(this.isValidUrl){this.urlError="",this.isLoading=!0;try{const t=h.getPlaylistIdFromUrl(this.playlistUrl);if(!t)throw new Error("Could not extract playlist ID from URL");this.$router.push(`/dashboard/${t}`)}catch(t){console.error("Error:",t),this.urlError=t.message||"An error occurred while processing the playlist",this.isLoading=!1}}else this.urlError="Please enter a valid Spotify playlist URL"}}};const O=(0,f.A)($,[["render",I],["__scopeId","data-v-258ad067"]]);var j=O;const F=[{path:"/",name:"home",component:j}],V=(0,m.aE)({history:(0,m.LA)("/spotifyanalyzer/"),routes:F});var x=V;(0,s.Ef)(k).use(x).mount("#app")}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var a=e[s]={exports:{}};return t[s].call(a.exports,a,a.exports,i),a.exports}i.m=t,function(){var t=[];i.O=function(e,s,n,a){if(!s){var r=1/0;for(u=0;u<t.length;u++){s=t[u][0],n=t[u][1],a=t[u][2];for(var l=!0,o=0;o<s.length;o++)(!1&a||r>=a)&&Object.keys(i.O).every((function(t){return i.O[t](s[o])}))?s.splice(o--,1):(l=!1,a<r&&(r=a));if(l){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[s,n,a]}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.p="/spotifyanalyzer/"}(),function(){var t={524:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,a,r=s[0],l=s[1],o=s[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(n in l)i.o(l,n)&&(i.m[n]=l[n]);if(o)var u=o(i)}for(e&&e(s);c<r.length;c++)a=r[c],i.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return i.O(u)},s=self["webpackChunkspotifyanalyzer"]=self["webpackChunkspotifyanalyzer"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[504],(function(){return i(9931)}));s=i.O(s)})();
//# sourceMappingURL=app.27c52233.js.map